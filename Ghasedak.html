<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tiny Ghasedak</title>
<style>
* {box-sizing:border-box;}
body {
  font-family:"Vazirmatn",sans-serif;
  margin:0;
  background:#fafafa;
  color:#000;
  transition:0.3s;
}
body.dark { background:#121212; color:#fff; }

header {
  background:#e20000;
  color:white;
  padding:15px;
  text-align:center;
  font-size:22px;
  margin-bottom:10px;
  position:relative;
}
header input {
  margin-top:10px;
  padding:5px;
  width:70%;
  max-width:250px;
  border-radius:8px;
  border:none;
  font-size:16px;
}
#themeToggle {
  position:absolute;
  left:15px;
  top:15px;
  padding:5px 10px;
  background:rgba(255,255,255,0.2);
  border:none;
  border-radius:8px;
  cursor:pointer;
  color:white;
  font-weight:bold;
}
body.dark #themeToggle { background:rgba(0,0,0,0.3); color:white; }

#cartIcon {
  position:absolute;
  right:15px;
  top:15px;
  cursor:pointer;
  font-size:24px;
}
#cartCount {
  position:absolute;
  top:-5px;
  right:-5px;
  background:red;
  color:white;
  font-size:12px;
  padding:2px 5px;
  border-radius:50%;
}

#products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:15px;
  padding:15px;
}
.item{
  background:white;
  padding:10px;
  border-radius:12px;
  box-shadow:0 4px 8px rgba(0,0,0,.1);
  cursor:pointer;
  transition:0.3s;
  text-align:center;
}
body.dark .item{
  background:#1e1e1e;
  box-shadow:0 4px 8px rgba(255,255,255,.1);
}
.item:hover{ transform:scale(1.05); }
.item img{ width:100%; border-radius:10px; }

button { cursor:pointer; }

/* Ù…ÙˆØ¯Ø§Ù„ Ù…Ø­ØµÙˆÙ„ */
#modal{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,.6);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:100;
}
#modalContent{
  background:white;
  padding:20px;
  border-radius:12px;
  width:90%;
  max-width:350px;
  text-align:center;
}
body.dark #modalContent{ background:#1e1e1e; color:white; }

/* Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ù¾Ø§ÛŒÛŒÙ† ØµÙØ­Ù‡ */
#cartContent{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  max-height:60vh;
  background:white;
  box-shadow:0 -2px 10px rgba(0,0,0,0.2);
  padding:10px 15px;
  z-index:200;
  border-top-left-radius:12px;
  border-top-right-radius:12px;
  overflow-y:auto;
  transition:0.3s;
}
body.dark #cartContent{ background:#1e1e1e; color:white; }
#cartContent h3{margin-top:0;}
#cartContent ul{list-style:none;padding:0;margin:0;}
#cartContent li{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:5px 0;
  border-bottom:1px solid #ccc;
}
body.dark #cartContent li{border-color:#555;}
#cartContent li img{width:50px;height:50px;object-fit:cover;border-radius:8px;margin-left:10px;}

/* Ø¯Ú©Ù…Ù‡ Ù‡Ø§ÛŒ ØªØ¹Ø¯Ø§Ø¯ */
.quantityControl{
  display:flex;
  align-items:center;
  border:1px solid #ccc;
  border-radius:8px;
  overflow:hidden;
  margin-left:10px;
}
.quantityControl button{
  border:none;
  background:#e20000;
  color:white;
  font-weight:bold;
  padding:5px 10px;
  font-size:16px;
  transition:0.2s;
}
.quantityControl button:hover{ background:#c10000; }
.quantityControl span{
  display:inline-block;
  padding:5px 10px;
  min-width:25px;
  text-align:center;
  background:#f5f5f5;
  font-weight:bold;
}
body.dark .quantityControl span{ background:#555; color:white; }

#cartContent .removeBtn{
  background:#ccc;
  border:none;
  padding:3px 6px;
  border-radius:6px;
  margin-left:5px;
}
#cartContent .removeBtn:hover{ background:#e20000; color:white; }

#payButton{
  margin-top:10px;
  background:#e20000;
  color:white;
  border:none;
  border-radius:8px;
  width:100%;
  padding:10px 0;
  font-size:16px;
}

/* Ù„Ø§ÛŒÙ‡ Ú©Ù…Ø±Ù†Ú¯ Ù¾Ø´Øª Ø§Ø¯Ø§Ù…Ù‡ ÙØ±Ø§ÛŒÙ†Ø¯ Ø®Ø±ÛŒØ¯ */
#overlayContent{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.7);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:300;
}

/* Ú©Ø§Ø¯Ø± Ø§Ø¯Ø§Ù…Ù‡ ÙØ±Ø§ÛŒÙ†Ø¯ Ø®Ø±ÛŒØ¯ */
#checkoutOverlayContent{
  background:white;
  width:90%;
  max-width:400px;
  max-height:80vh;
  overflow-y:auto;
  padding:20px;
  border-radius:12px;
  text-align:center;
  z-index:400;
}
body.dark #checkoutOverlayContent{ background:#1e1e1e; color:white; }
#checkoutOverlayContent ul{list-style:none;padding:0;margin:0;}
#checkoutOverlayContent li{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:5px 0;
  border-bottom:1px solid #ccc;
}
body.dark #checkoutOverlayContent li{ border-color:#555; }
#checkoutOverlayContent li img{width:50px;height:50px;object-fit:cover;border-radius:8px;margin-left:10px;}
#checkoutOverlayContent p.infoText{margin-top:10px;font-size:14px;color:#555;}
#backButton{
  margin-top:10px;
  background:#e20000;
  color:#fff;
  border:none;
  border-radius:8px;
  width:100%;
  padding:10px 0;
  font-size:16px;
}
</style>
</head>
<body>

<header>
  <button id="themeToggle">ğŸŒ™</button>
  ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Tiny Ghasedak
  <span id="cartIcon">ğŸ›’<span id="cartCount">0</span></span>
  <br>
  <input type="text" id="search" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„...">
</header>

<div id="products">
  <div class="item" onclick="showModal('Ø´Ø§Ù„ Ø±ÛŒØ² Ø¨Ø§ÙØª Ø·Ø±Ø­ Ø¯Ø§Ø±','285000','Shal1.jpg')">
    <img src="Shal1.jpg" alt="Ø´Ø§Ù„ Ø±ÛŒØ² Ø¨Ø§ÙØª Ø·Ø±Ø­ Ø¯Ø§Ø±">
    <p>Ø´Ø§Ù„ Ø±ÛŒØ² Ø¨Ø§ÙØª Ø·Ø±Ø­ Ø¯Ø§Ø±</p>
  </div> 

  <div class="item" onclick="showModal('Ø´Ø§Ù„ Ø¨Ø§ÙØª Ø±ÛŒØ²','285000','Shal2.jpg')">
    <img src="Shal2.jpg" alt="Ø´Ø§Ù„ Ø¨Ø§ÙØª Ø±ÛŒØ²">
    <p>Ø´Ø§Ù„ Ø¨Ø§ÙØª Ø±ÛŒØ²</p>
  </div>

 <div class="item" onclick="showModal('Ø´Ø§Ù„ Ø§Ø³Ù„Ù¾ Ù¾ÛŒÚ¯Ù…Ù†Øª Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø±  ','235000','Shal3.jpg')">
    <img src="Shal3.jpg" alt="Ø´Ø§Ù„ Ø§Ø³Ù„Ù¾ Ù¾ÛŒÚ¯Ù…Ù†Øª Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø±">
    <p>Ø´Ø§Ù„ Ø§Ø³Ù„Ù¾ Ù¾ÛŒÚ¯Ù…Ù†Øª Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø±</p>
  </div>

 <div class="item" onclick="showModal('Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆØ¦ÛŒ Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø± Û±','215000','Shal4.jpg')">
    <img src="Shal4.jpg" alt="Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆØ¦ÛŒ Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø± Û±">
    <p> Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆØ¦ÛŒ Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø± Û±</p>
  </div>

 <div class="item" onclick="showModal('Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆØ¦ÛŒ Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø± Û²','215000','Shal5.jpg')">
    <img src="Shal5.jpg" alt="Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆØ¦ÛŒ Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø± Û²">
    <p>Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆØ¦ÛŒ Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø± Û²</p>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ø­ØµÙˆÙ„ -->
<div id="modal" onclick="closeModal()">
  <div id="modalContent" onclick="event.stopPropagation()">
    <h3 id="mTitle"></h3>
    <p id="mPrice"></p>
    <button id="addToCartBtn" onclick="addToCart()">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
    <button onclick="closeModal()" style="background:#e20000;color:white;padding:8px 15px;border:none;border-radius:8px;margin-top:10px">Ø¨Ø³ØªÙ†</button>
  </div>
</div>

<!-- Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ù¾Ø§ÛŒÛŒÙ† ØµÙØ­Ù‡ -->
<div id="cartContent">
  <h3>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§</h3>
  <ul id="cartItems"></ul>
  <p id="emptyCartText">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p>
  <p>Ø¬Ù…Ø¹ Ú©Ù„: <span id="cartTotal">0</span> ØªÙˆÙ…Ø§Ù†</p>
  <button id="payButton">Ø§Ø¯Ø§Ù…Ù‡</button>
</div>

<!-- Ù„Ø§ÛŒÙ‡ Ú©Ù…Ø±Ù†Ú¯ Ø§Ø¯Ø§Ù…Ù‡ ÙØ±Ø§ÛŒÙ†Ø¯ Ø®Ø±ÛŒØ¯ -->
<div id="overlayContent">
  <div id="checkoutOverlayContent">
    <h3>Ø¬Ø²Ø¦ÛŒØ§Øª Ø³ÙØ§Ø±Ø´ Ø´Ù…Ø§</h3>
    <ul id="checkoutItems"></ul>
    <p style="font-weight:bold;margin-top:10px;">Ø¬Ù…Ø¹ Ú©Ù„: <span id="checkoutTotal">0</span> ØªÙˆÙ…Ø§Ù†</p>
    <p class="infoText">Ø¬Ù‡Øª ØªÚ©Ù…ÛŒÙ„ ÙØ±Ø§ÛŒÙ†Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø³Ú©Ø±ÛŒÙ† Ø´Ø§Øª Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ø±Ø§ Ø¯Ø§Ø®Ù„ Ø¯Ø§ÛŒÛŒØ±Ú©Øª Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯</p>
    <button id="backButton">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
  </div>
</div>

<script>
let cart=[];
let selectedProduct={};

function showModal(title,price,img){
  selectedProduct={title,price:parseInt(price),img,quantity:1};
  document.getElementById("mTitle").innerText=title;
  document.getElementById("mPrice").innerText="Ù‚ÛŒÙ…Øª: "+Number(price).toLocaleString()+" ØªÙˆÙ…Ø§Ù†";
  document.getElementById("modal").style.display="flex";
}
function closeModal(){ document.getElementById("modal").style.display="none"; }

function addToCart(){
  const existing=cart.find(item=>item.title===selectedProduct.title);
  if(existing){ existing.quantity+=1; } else{ cart.push({...selectedProduct}); }
  updateCart();
  closeModal();
}

function updateCart(){
  const cartItems=document.getElementById('cartItems');
  const emptyCartText=document.getElementById('emptyCartText');
  cartItems.innerHTML='';
  let total=0;
  if(cart.length===0){ emptyCartText.style.display='block'; }
  else{ emptyCartText.style.display='none'; }

  cart.forEach((item,index)=>{
    const li=document.createElement('li');
    li.innerHTML=`<div style="display:flex;align-items:center">
                    <img src="${item.img}" alt="${item.title}">
                    <span>${item.title}</span>
                    <div class="quantityControl">
                      <button onclick="changeQuantity(${index},-1)">-</button>
                      <span>${item.quantity}</span>
                      <button onclick="changeQuantity(${index},1)">+</button>
                    </div>
                  </div>
                  <div>
                    <span>${Number(item.price*item.quantity).toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>
                    <button class="removeBtn" onclick="removeItem(${index})">Ã—</button>
                  </div>`;
    cartItems.appendChild(li);
    total+=item.price*item.quantity;
  });
  document.getElementById('cartTotal').innerText=total.toLocaleString();
  document.getElementById('cartCount').innerText=cart.reduce((sum,i)=>sum+i.quantity,0);
}

function changeQuantity(index,delta){
  cart[index].quantity += delta;
  if(cart[index].quantity<1) cart[index].quantity=1;
  updateCart();
}
function removeItem(index){ cart.splice(index,1); updateCart(); }

document.getElementById('themeToggle').addEventListener('click',()=>{
  document.body.classList.toggle('dark');
  document.getElementById('themeToggle').innerText=document.body.classList.contains('dark')?'â˜€ï¸':'ğŸŒ™';
});

document.getElementById('search').addEventListener('input',function(){
  let filter=this.value.toLowerCase();
  document.querySelectorAll('#products .item').forEach(item=>{
    let text=item.querySelector('p').innerText.toLowerCase();
    item.style.display=text.includes(filter)?'':'none';
  });
});

document.getElementById('cartIcon').addEventListener('click',()=>{
  const cartDiv=document.getElementById('cartContent');
  cartDiv.style.display = cartDiv.style.display==='block'?'none':'block';
});

// Ø§Ø¯Ø§Ù…Ù‡ ÙØ±Ø§ÛŒÙ†Ø¯ Ø®Ø±ÛŒØ¯
const overlay=document.getElementById('overlayContent');
const checkoutItems=document.getElementById('checkoutItems');
const checkoutTotal=document.getElementById('checkoutTotal');
const backButton=document.getElementById('backButton');

document.getElementById('payButton').onclick=function(){
  if(cart.length===0) return alert('Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª');
  overlay.style.display="flex";
  document.querySelectorAll('body > *:not(#cartContent):not(#overlayContent)').forEach(el=>{
    el.style.pointerEvents="none";
    el.style.opacity="0.5";
  });

  checkoutItems.innerHTML='';
  let total=0;
  cart.forEach(item=>{
    const li=document.createElement('li');
    li.style.display='flex';
    li.style.alignItems='center';
    li.style.justifyContent='space-between';
    li.style.marginBottom='8px';
    li.innerHTML=`<div style="display:flex;align-items:center">
                    <img src="${item.img}" style="width:50px;height:50px;object-fit:cover;border-radius:8px;margin-left:10px;">
                    <span>${item.title} Ã— ${item.quantity}</span>
                  </div>
                  <span>${Number(item.price*item.quantity).toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>`;
    checkoutItems.appendChild(li);
    total+=item.price*item.quantity;
  });
  checkoutTotal.innerText=total.toLocaleString();
}

backButton.onclick=function(){
  overlay.style.display="none";
  document.querySelectorAll('body > *:not(#cartContent)').forEach(el=>{
    el.style.pointerEvents="auto";
    el.style.opacity="1";
  });
}
</script>
</body>
</html>