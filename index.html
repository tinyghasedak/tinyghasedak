<!DOCTYPE html>  
<html lang="fa" dir="rtl">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<title>Tiny Ghasedak</title>  
  
<style>  
*{margin:0;padding:0;box-sizing:border-box;font-family:"Vazirmatn",sans-serif;}  
body{
    background:linear-gradient(135deg,#2ab5ff 0%,#86e4ff 30%,#ffffff 80%);
    min-height:100vh;
    padding-bottom:120px;
}

/* ------------------- Ù‡Ø¯Ø± ------------------- */
header{
    width:100%;background:rgba(0,90,160,0.45);
    backdrop-filter:blur(10px);
    padding:20px 15px 30px;text-align:center;color:white;
    border-bottom:2px solid rgba(255,255,255,0.3);
    position:relative;
}
header h1{font-size:24px;margin-bottom:10px;}
#topRight{
    position:absolute;top:15px;left:15px;
    display:flex;align-items:center;gap:8px;
    cursor:pointer;font-size:26px;
}
#cartCount{
    background:red;color:white;font-size:12px;
    padding:2px 6px;border-radius:50%;
}

#search{
    width:85%;max-width:350px;padding:10px 15px;
    border-radius:12px;border:none;font-size:16px;
}

/* ------------------- Ú¯Ø±ÛŒØ¯ Ù…Ø­ØµÙˆÙ„Ø§Øª ------------------- */
#products{
    padding:20px;
    display:grid;gap:15px;
    grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
}
.item{
    background:white;padding:10px;border-radius:14px;
    box-shadow:0 4px 12px rgba(0,0,0,.15);
    cursor:pointer;transition:.3s;text-align:center;
}
.item:hover{transform:scale(1.05);}
.item img{width:100%;border-radius:12px;margin-bottom:8px;}


/* ---------------------- ØµÙØ­Ù‡ Ù…Ø­ØµÙˆÙ„ ---------------------- */
#productPage{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:white;display:none;flex-direction:column;
    overflow-y:auto;z-index:10000;
}

/* ---------------------- Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù…ÛŒ ---------------------- */
#sliderBox{
    width:100%;
    overflow-x:auto;
    padding:0 25px;
    display:flex;
    gap:12px;
    scroll-snap-type:x mandatory;
    scrollbar-width:none;
    margin-top:20px;
}
#sliderBox::-webkit-scrollbar{display:none;}

.slide{
    flex:0 0 85%;
    scroll-snap-align:center;
}
.slide img{
    width:100%;
    border-radius:18px;
    box-shadow:0 5px 18px rgba(0,0,0,0.25);
    display:block;
}

#productInfo{padding:20px;}


/* ---------------------- Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ ---------------------- */
#cartPanel{
    position:fixed;
    top:0;
    right:-100%;
    width:300px;
    height:100vh;
    background:rgba(255,255,255,0.2);
    backdrop-filter:blur(18px);
    box-shadow:4px 0 15px rgba(0,0,0,0.25);
    padding:20px;
    transition:.35s;
    z-index:9999;
    display:flex;flex-direction:column;
}
#cartItems{flex:1;overflow-y:auto;}

.cartItem{
    padding:10px;margin-bottom:12px;
    background:white;border-radius:10px;
    box-shadow:0 2px 8px rgba(0,0,0,.15);
}

.qtyBox{
    display:flex;align-items:center;
    border:1px solid #aaa;border-radius:8px;
    overflow:hidden;width:85px;
}
.qtyBox button{
    background:#2196f3;color:white;border:none;
    padding:5px 10px;font-size:18px;
}
.qtyBox span{padding:5px 12px;display:block;text-align:center;}

.btn{width:100%;padding:12px;border:none;border-radius:12px;font-size:17px;cursor:pointer;margin-top:12px;}
.blue{background:#2196f3;color:white;}
.red{background:#e20000;color:white;}

/* ------------------ Ú†Ú© Ø§ÙˆØª ------------------ */
#overlay{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:rgba(0,0,0,0.45);backdrop-filter:blur(6px);
    display:none;justify-content:center;align-items:center;z-index:99999;
}
#checkoutBox{
    background:white;padding:20px;border-radius:14px;
    width:90%;max-width:400px;max-height:80vh;overflow-y:auto;
}
.line{border-bottom:1px solid #ccc;margin:10px 0;}

</style>
</head>
<body>

<header>
    <h1>Tiny Ghasedak</h1>
    <input id="search" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„...">
    <div id="topRight">
        <span id="cartIcon">ğŸ›’</span>
        <span id="cartCount">0</span>
    </div>
</header>

<div id="products">

    <div class="item" onclick="openProduct('Ø´Ø§Ù„ Ø±ÛŒØ² Ø¨Ø§ÙØª Ø·Ø±Ø­ Ø¯Ø§Ø±',285000,['Shal1.jpg','Shal1-2.jpg','Shal1-3.jpg'],[
        {name:'Ù‚Ø±Ù…Ø²',available:true},
        {name:'Ø¢Ø¨ÛŒ',available:false},
        {name:'Ù…Ø´Ú©ÛŒ',available:true}
    ])">
        <img src="Shal1.jpg"><p>Ø´Ø§Ù„ Ø±ÛŒØ² Ø¨Ø§ÙØª Ø·Ø±Ø­ Ø¯Ø§Ø±</p>
    </div>

    <div class="item" onclick="openProduct('Ø´Ø§Ù„ Ø¨Ø§ÙØª Ø±ÛŒØ²',285000,['Shal2.jpg','Shal2-2.jpg'],[
        {name:'Ù†Ø§Ø±Ù†Ø¬ÛŒ',available:true},
        {name:'Ø¨Ù†ÙØ´',available:true},
        {name:'ØµÙˆØ±ØªÛŒ',available:false},
        {name:'Ù…Ø´Ú©ÛŒ',available:true}
    ])">
        <img src="Shal2.jpg"><p>Ø´Ø§Ù„ Ø¨Ø§ÙØª Ø±ÛŒØ²</p>
    </div>

    <div class="item" onclick="openProduct('Ø´Ø§Ù„ Ø§Ø³Ù„Ù¾ Ù¾ÛŒÚ¯Ù…Ù†Øª Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø±',235000,['Shal3.jpg'],[
        {name:'Ø²ÛŒØªÙˆÙ†ÛŒ',available:true},
        {name:'Ø³Ø±Ù…Ù‡â€ŒØ§ÛŒ',available:true},
        {name:'Ù‚Ø±Ù…Ø²',available:false}
    ])">
        <img src="Shal3.jpg"><p>Ø´Ø§Ù„ Ø§Ø³Ù„Ù¾ Ù¾ÛŒÚ¯Ù…Ù†Øª Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø±</p>
    </div>

      <div class="item" onclick="openProduct('Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆÛŒÛŒ Û±',215000,'Shal4.jpg',[
        {name:'Ø·ÙˆØ³ÛŒ',available:true},
        {name:'Ú©Ø±Ù…',available:true},
        {name:'Ù…Ø´Ú©ÛŒ',available:false}
    ])">
        <img src="Shal4.jpg"><p>Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆÛŒÛŒ Û±</p>
    </div>

    <div class="item" onclick="openProduct('Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆÛŒÛŒ Û²',215000,'Shal5.jpg',[
        {name:'ÛŒØ§Ø³ÛŒ',available:true},
        {name:'Ø¢Ø¨ÛŒ',available:true},
        {name:'Ù‚Ø±Ù…Ø²',available:false},
        {name:'Ù†Ø§Ø±Ù†Ø¬ÛŒ',available:true}
    ])">
        <img src="Shal5.jpg"><p>Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆÛŒÛŒ Û²</p>
    </div>

</div>


<!-- ØµÙØ­Ù‡ Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ø¬Ø¯ÛŒØ¯ -->
<div id="productPage">

    <div id="sliderBox"></div>

    <div id="productInfo">
        <h2 id="pName"></h2>
        <p id="pPrice" style="margin:10px 0;font-size:18px;font-weight:bold;"></p>
        <div id="colorSelect" style="margin:15px 0;"></div>
        <button class="btn blue" onclick="addToCart()">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
        <button class="btn red" onclick="closeProduct()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>
</div>


<!-- Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ -->
<div id="cartPanel">
    <h3>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h3>
    <div id="cartItems"></div>
    <button class="btn blue" onclick="openCheckout()">Ø§Ø¯Ø§Ù…Ù‡</button>
    <button class="btn red" onclick="closeCart()">Ø¨Ø³ØªÙ†</button>
</div>


<!-- Ú†Ú© Ø§ÙˆØª -->
<div id="overlay">
    <div id="checkoutBox">
        <h3>Ø¬Ø²Ø¦ÛŒØ§Øª Ø³ÙØ§Ø±Ø´</h3>
        <div id="checkoutList"></div>
        <div class="line"></div>
        <p style="font-size:16px;font-weight:bold">
            Ø¬Ù…Ø¹ Ú©Ù„: <span id="checkoutSum">0</span> ØªÙˆÙ…Ø§Ù†
        </p>
        <button class="btn blue" onclick="closeCheckout()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>
</div>


<script>

/* ------------------ Ø¬Ø³ØªØ¬Ùˆ ------------------ */
let cart = JSON.parse(localStorage.getItem("cart") || "[]");
updateCartCount();

search.addEventListener("input", function(){
    let v = this.value.toLowerCase();
    document.querySelectorAll(".item").forEach(it=>{
        it.style.display = it.innerText.toLowerCase().includes(v) ? "block" : "none";
    });
});


/* ------------------ Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù…ÛŒ ------------------ */
function buildSlider(imgs){
    sliderBox.innerHTML = "";
    imgs.forEach(src=>{
        sliderBox.innerHTML += `
            <div class="slide">
                <img src="${src}">
            </div>
        `;
    });
}


/* ------------------ ØµÙØ­Ù‡ Ù…Ø­ØµÙˆÙ„ ------------------ */
let currentProduct = {};
let selectedColor = "";

function openProduct(name, price, imgs, colors){
    currentProduct = {name,price,imgs,quantity:1};
    selectedColor = "";

    buildSlider(imgs);

    pName.innerText=name;
    pPrice.innerText=price.toLocaleString()+" ØªÙˆÙ…Ø§Ù†";

    generateColors(colors);

    productPage.style.display="flex";
}

function closeProduct(){
    productPage.style.display="none";
}


/* ------------------ Ø±Ù†Ú¯ Ù‡Ø§ ------------------ */
function generateColors(list){
    let box=document.getElementById("colorSelect");
    box.innerHTML="<p style='font-weight:bold'>Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ú¯:</p>";
    list.forEach(c=>{
        box.innerHTML+=`
        <label style="display:flex;align-items:center;gap:8px;margin-top:8px;${!c.available?'opacity:0.5;':''}">
            <input type="checkbox" name="pColor" value="${c.name}"
                ${!c.available?'disabled':''}
                onclick="selectColor(this)">
            ${c.name} ${c.available?'':'(Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯)'}
        </label>
        `;
    });
}

function selectColor(el){
    document.querySelectorAll("input[name='pColor']").forEach(c=>c.checked=false);
    el.checked=true;
    selectedColor=el.value;
}


/* ------------------ Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ ------------------ */
function addToCart(){
    if(!selectedColor){ alert("Ù„Ø·ÙØ§Ù‹ Ø±Ù†Ú¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"); return; }

    let exist=cart.find(i=>i.name===currentProduct.name && i.color===selectedColor);
    if(exist) exist.quantity++;
    else cart.push({...currentProduct,color:selectedColor,img:currentProduct.imgs[0]});

    localStorage.setItem("cart",JSON.stringify(cart));
    updateCartCount();
    alert("Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ âœ”");
}

function updateCartCount(){
    cartCount.innerText=cart.reduce((t,i)=>t+i.quantity,0);
}


/* ------------------ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ ------------------ */
cartIcon.onclick=()=>{loadCart();cartPanel.style.right="0";}
function closeCart(){cartPanel.style.right="-100%";}

function loadCart(){
    cartItems.innerHTML="";
    if(cart.length===0){cartItems.innerHTML="<p>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p>";return;}

    cart.forEach((p,i)=>{
        cartItems.innerHTML+=`
            <div class="cartItem">
                <strong>${p.name} - ${p.color}</strong><br>
                Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯: ${p.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†

                <div style="display:flex;align-items:center;gap:8px;margin-top:8px;">
                    <div class="qtyBox">
                        <button onclick="changeQty(${i},1)">+</button>
                        <span>${p.quantity}</span>
                        <button onclick="changeQty(${i},-1)">-</button>
                    </div>

                    <button style="padding:6px 10px;background:#e20000;color:white;border:none;border-radius:8px;cursor:pointer"
                        onclick="removeItem(${i})">Ø­Ø°Ù</button>
                </div>
            </div>
        `;
    });
}

function changeQty(i,d){
    cart[i].quantity+=d;
    if(cart[i].quantity<1) cart[i].quantity=1;
    localStorage.setItem("cart",JSON.stringify(cart));
    updateCartCount();
    loadCart();
}

function removeItem(i){
    cart.splice(i,1);
    localStorage.setItem("cart",JSON.stringify(cart));
    updateCartCount();
    loadCart();
}


/* ------------------ Ú†Ú© Ø§ÙˆØª ------------------ */
function openCheckout(){
    if(cart.length===0) return;

    checkoutList.innerHTML="";
    let sum=0;

    cart.forEach(p=>{
        let total=p.quantity*p.price;
        sum+=total;

        checkoutList.innerHTML+=`
            <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
                <img src="${p.img}" style="width:55px;height:55px;border-radius:8px;object-fit:cover;">
                <div>
                    <p><strong>${p.name} - ${p.color}</strong></p>
                    <p>ØªØ¹Ø¯Ø§Ø¯: ${p.quantity}</p>
                    <p>Ù‚ÛŒÙ…Øª: ${total.toLocaleString()} ØªÙˆÙ…Ø§Ù†</p>
                </div>
            </div>
            <div class="line"></div>
        `;
    });

    checkoutSum.innerText=sum.toLocaleString();
    overlay.style.display="flex";
}

function closeCheckout(){overlay.style.display="none";}

</script>
</body>
</html>

